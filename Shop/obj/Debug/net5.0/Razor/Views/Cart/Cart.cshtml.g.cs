#pragma checksum "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "df67cd50d765c76c452cb2c8c38a0fd6e6d7f314"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Cart_Cart), @"mvc.1.0.view", @"/Views/Cart/Cart.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\_ViewImports.cshtml"
using Shop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\_ViewImports.cshtml"
using Shop.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"df67cd50d765c76c452cb2c8c38a0fd6e6d7f314", @"/Views/Cart/Cart.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"cc6b55325b0ab971ba758bcc34a0cc77645e073f", @"/Views/_ViewImports.cshtml")]
    public class Views_Cart_Cart : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<CartModel>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 2 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
  
    ViewData["Title"] = "Cart";
    Layout = "~/Views/Shared/_SecondLayout.cshtml";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<!-- Cart Start -->
<div class=""container-fluid pt-5"">
    <div class=""row px-xl-5"">
        <div class=""col-lg-8"">
            <p style=""float: left; font: 900 !important; font-size: 3vmax; color: black"">GIỎ HÀNG CỦA TÔI</p>
        </div>
    </div>
    <div class=""row px-xl-5"">
        <div class=""col-lg-8 table-responsive mb-5"">
            <table class=""table table-bordered text-center mb-0"" id=""table_cart"">
                <thead class=""bg-secondary text-dark"">
                    <tr>
                        <th>Sản phẩm</th>
                        <th>Giá</th>
                        <th>Số lượng</th>
                        <th>Tổng</th>
                        <th>Xóa</th>
                    </tr>
                </thead>
                <tbody class=""align-middle"">
");
#nullable restore
#line 27 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
                       decimal allsum = 0; 

#line default
#line hidden
#nullable disable
#nullable restore
#line 28 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
                     foreach (var item in Model.items)
                    {
                        var priceid = "price" + item.id;
                        var quantityid = "quantity" + item.id;
                        var sumid = "sum" + item.id;
                        var rowid = "row" + item.id;

#line default
#line hidden
#nullable disable
            WriteLiteral("                        <tr");
            BeginWriteAttribute("id", " id=\"", 1304, "\"", 1315, 1);
#nullable restore
#line 34 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
WriteAttributeValue("", 1309, rowid, 1309, 6, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n                            <td class=\"align-middle\"><img");
            BeginWriteAttribute("src", " src=\"", 1376, "\"", 1394, 1);
#nullable restore
#line 35 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
WriteAttributeValue("", 1382, item.img[0], 1382, 12, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 1395, "\"", 1401, 0);
            EndWriteAttribute();
            WriteLiteral(" style=\"width: 50px;\"> ");
#nullable restore
#line 35 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
                                                                                                     Write(item.name);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                            <td class=\"align-middle\"");
            BeginWriteAttribute("id", " id=\"", 1494, "\"", 1507, 1);
#nullable restore
#line 36 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
WriteAttributeValue("", 1499, priceid, 1499, 8, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">");
#nullable restore
#line 36 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
                                                              Write(string.Format("{0:#,##0}", item.price));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"</td>
                            <td class=""align-middle"">
                                <div class=""input-group quantity mx-auto"" style=""width: 100px;"">
                                    <div class=""input-group-btn"">
                                        <button class=""btn btn-sm btn-primary btn-minus""");
            BeginWriteAttribute("onclick", " onclick=\"", 1863, "\"", 1890, 3);
            WriteAttributeValue("", 1873, "Remove1(", 1873, 8, true);
#nullable restore
#line 40 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
WriteAttributeValue("", 1881, item.id, 1881, 8, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 1889, ")", 1889, 1, true);
            EndWriteAttribute();
            WriteLiteral(">\r\n                                            <i class=\"fa fa-minus\"></i>\r\n                                        </button>\r\n                                    </div>\r\n                                    <input type=\"text\"");
            BeginWriteAttribute("id", " id=\"", 2116, "\"", 2132, 1);
#nullable restore
#line 44 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
WriteAttributeValue("", 2121, quantityid, 2121, 11, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"form-control form-control-sm bg-secondary text-center\"");
            BeginWriteAttribute("value", " value=\"", 2195, "\"", 2217, 1);
#nullable restore
#line 44 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
WriteAttributeValue("", 2203, item.quantity, 2203, 14, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n                                    <div class=\"input-group-btn\">\r\n                                        <button class=\"btn btn-sm btn-primary btn-plus\"");
            BeginWriteAttribute("onclick", " onclick=\"", 2375, "\"", 2399, 3);
            WriteAttributeValue("", 2385, "Add1(", 2385, 5, true);
#nullable restore
#line 46 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
WriteAttributeValue("", 2390, item.id, 2390, 8, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 2398, ")", 2398, 1, true);
            EndWriteAttribute();
            WriteLiteral(@">
                                            <i class=""fa fa-plus""></i>
                                        </button>
                                    </div>
                                </div>
                            </td>
                            <td class=""align-middle""");
            BeginWriteAttribute("id", " id=\"", 2697, "\"", 2708, 1);
#nullable restore
#line 52 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
WriteAttributeValue("", 2702, sumid, 2702, 6, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n");
#nullable restore
#line 53 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
                                   var sum = item.price * item.quantity;
                                    allsum += sum;
                                

#line default
#line hidden
#nullable disable
            WriteLiteral("                                ");
#nullable restore
#line 56 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
                           Write(string.Format("{0:#,##0}", sum));

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                            </td>\r\n                            <td class=\"align-middle\"><button class=\"btn btn-sm btn-primary\"");
            BeginWriteAttribute("onclick", " onclick=\"", 3065, "\"", 3095, 3);
            WriteAttributeValue("", 3075, "DeleteCart(", 3075, 11, true);
#nullable restore
#line 58 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
WriteAttributeValue("", 3086, item.id, 3086, 8, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 3094, ")", 3094, 1, true);
            EndWriteAttribute();
            WriteLiteral("><i class=\"fa fa-times\"></i></button></td>\r\n                        </tr>\r\n");
#nullable restore
#line 60 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
                    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                </tbody>
            </table>
        </div>
        <div class=""col-lg-4"">
            <div class=""card border-secondary mb-5"">
                <div class=""card-header bg-secondary border-0"">
                    <h4 class=""font-weight-semi-bold m-0"">Tổng giá</h4>
                </div>
                <div class=""card-footer border-secondary bg-transparent"">
                    <div class=""d-flex justify-content-between mt-2"">
                        <h5 class=""font-weight-bold"" id=""allsum"">");
#nullable restore
#line 71 "E:\Projects\Shop_NET_Razor\Shop\Shop\Views\Cart\Cart.cshtml"
                                                            Write(string.Format("{0:#,##0}", allsum));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"</h5>
                    </div>
                    <button id=""btnCheckOut"" class=""btn btn-block btn-primary my-3 py-3"">Thanh toán</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Cart End -->

<script>
    function Remove1(id) {
        var c = $('#quantity' + id).val()
        if (c > 1) {
            $.ajax({
                url: '/Cart/RemoveFromCart',
                type: 'post',
                async: true,
                data: {
                    productid: id,
                    quantity: 1
                },
                success: function () {
                    UpdatePrice(id);
                    getCartCount();
                }
            })
        }
    }

    function Add1(id) {
        $.ajax({
        url: '/Cart/AddToCart',
        type: 'post',
        async: true,
        data: {
            productid: id,
            quantity: 1
        },
        success: function () {
            UpdatePrice(id)");
            WriteLiteral(@";
        }
    })
    }

    function UpdatePrice(id) {
        var price = parseInt($('#price' + id).text().replaceAll(',',''));
        var quatity = parseInt($('#quantity' + id).val());
        var sum = price * quatity + """";
        $('#sum' + id).text(sum.replace(/(\d)(?=(\d{3})+$)/g, '$1,'));

        UpdateAllSum();
    }

    function UpdateAllSum() {
        var table = document.getElementById('table_cart')
        var tablerow = table.rows

        var sum = 0;
        for (i = 1; i < tablerow.length; i++ ) {
            sum += parseInt(tablerow[i].cells[3].innerText.replaceAll(',',''))
        }
        
        $('#allsum').text(("""" + sum).replace(/(\d)(?=(\d{3})+$)/g, '$1,'));

        sum == 0 ? $('#btnCheckOut').hide() : $('#btnCheckOut').show()
    }

    function DeleteCart(id) {
        $.ajax({
                url: '/Cart/RemoveFromCart',
                type: 'post',
                async: true,
                data: {
                    productid: id,
");
            WriteLiteral(@"                    quantity: 0
                },
                success: function () {
                    DeleteTableRow(id);
                }
            })
    }

    function DeleteTableRow(id) {
        $('#row' + id).remove()
        UpdateAllSum()
    }
</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<CartModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
